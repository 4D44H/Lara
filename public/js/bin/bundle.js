var Club;
(function (Club) {
    Club[Club["None"] = 0] = "None";
    Club[Club["BcClub"] = 2] = "BcClub";
    Club[Club["BcCafe"] = 3] = "BcCafe";
    Club[Club["BdClub"] = 4] = "BdClub";
    Club[Club["BhClub"] = 5] = "BhClub";
    Club[Club["BiClub"] = 6] = "BiClub";
})(Club || (Club = {}));
function getIdOfClub(club) {
    switch (club) {
        case "bc-Club":
            return Club.BcClub;
        case "bc-Caf√©":
            return Club.BcCafe;
    }
    return Club.None;
}
function showErrorModal(message) {
    $("#errorModal").modal("show");
    $("#errorModal").find(".modal-body").html(message);
}

///<reference path="../typings/index.d.ts"/>
///<reference path="Utilities.ts"/>
// values of events that should trigger the selection of all clubs
var internalEventValues = [
    "1",
    "4",
    "5",
    "6",
    "9" // other
];
$("#button-create-submit").add("#button-edit-submit").click(function () {
    var errors = new Array();
    var beginDate = new Date($("[name='beginDate']").prop("value") + " " + $("[name='beginTime']").prop("value"));
    var endDate = new Date($("[name='endDate']").prop("value") + " " + $("[name='endTime']").prop("value"));
    if (beginDate.getTime() > endDate.getTime()) {
        errors.push("Die Startzeit liegt vor der Endzeit!");
    }
    if ($("#filter-checkboxes").find("input[type=checkbox]:checked").length === 0) {
        errors.push("Den Filter vergessen! Bitte setze mindestens eine Sektion, der diese Veranstaltung/Aufgabe gezeigt werden soll.");
    }
    if (errors.length > 0) {
        bootbox.alert(errors.map(function (err) { return "<p>" + err + "</p>"; }).join("\n"));
        return false;
    }
});
$(function () {
    // if set, internal events will trigger selection of all clubs
    // if user sets the club manually, we want to keep his selection
    var autoSelectAllClubs = true;
    var allClubCheckBoxes = $("#filter").find("input[type=checkbox]");
    allClubCheckBoxes.click(function () {
        autoSelectAllClubs = false;
    });
    // important to use function() (anonymous function) here an not an arrow function
    // using an arrow function will change the "this" inside
    $("[name='evnt_type']").click(function () {
        var prop = $(this).val();
        var isInternalEvent = internalEventValues.indexOf(prop) !== -1;
        if (isInternalEvent) {
            if (autoSelectAllClubs) {
                $("#filter").find("input[type=checkbox]").prop("checked", true);
            }
        }
        else {
            // reset all checkboxes
            $("#filter").find("input[type=checkbox]").prop("checked", false);
            var clubName = $(document).find("#place").val();
            var clubId = getIdOfClub(clubName);
            if (clubId !== -1) {
                var showToClubCheckbox = $(document).find("[name=filterShowToClub" + clubId + "]");
                showToClubCheckbox.prop("checked", true);
            }
        }
    });
});

///<reference path="../typings/index.d.ts"/>
///<reference path="Utilities.ts"/>
$("#button-create-survey").click(function () {
    var errors = new Array();
    if ($("#description").val().length > 1500) {
        errors.push("Der Beschreibungstext ist zu lange! Der Text sollte weniger als 1500 Zeichen enthalten.");
    }
    if (errors.length > 0) {
        bootbox.alert(errors.map(function (err) { return "<p>" + err + "</p>"; }).join("\n"));
        return false;
    }
});

///<reference path="../typings/index.d.ts"/>
///<reference path="Utilities.ts"/>

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlV0aWxpdGllcy50cyIsIkNyZWF0ZUVkaXRFdmVudC50cyIsIkNyZWF0ZVN1cnZleS50cyIsIkV2ZW50Vmlldy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFLLElBT0o7QUFQRCxXQUFLLElBQUk7SUFDTCwrQkFBSSxDQUFBO0lBQ0osbUNBQVUsQ0FBQTtJQUNWLG1DQUFNLENBQUE7SUFDTixtQ0FBTSxDQUFBO0lBQ04sbUNBQU0sQ0FBQTtJQUNOLG1DQUFNLENBQUE7QUFDVixDQUFDLEVBUEksSUFBSSxLQUFKLElBQUksUUFPUjtBQUVELHFCQUFzQixJQUFZO0lBQzlCLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDWCxLQUFLLFNBQVM7WUFDVixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUN2QixLQUFLLFNBQVM7WUFDVixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUMzQixDQUFDO0lBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDckIsQ0FBQztBQUVELHdCQUF3QixPQUFlO0lBQ25DLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDL0IsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDdkQsQ0FBQzs7QUN0QkQsNENBQTRDO0FBQzVDLG1DQUFtQztBQUVuQyxrRUFBa0U7QUFDbEUsSUFBSSxtQkFBbUIsR0FBRztJQUN0QixHQUFHO0lBQ0gsR0FBRztJQUNILEdBQUc7SUFDSCxHQUFHO0lBQ0gsR0FBRyxDQUFFLFFBQVE7Q0FDaEIsQ0FBQztBQUVGLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUN4RCxJQUFJLE1BQU0sR0FBRyxJQUFJLEtBQUssRUFBVSxD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LENBQUM7Z0JBQ2hCLElBQUksa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUM7Z0JBQ25GLGtCQUFrQixDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDN0MsQ0FBQztRQUNMLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDOztBQzVESCw0Q0FBNEM7QUFDNUMsbUNBQW1DO0FBRW5DLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUM3QixJQUFJLE1BQU0sR0FBRyxJQUFJLEtBQUssRUFBVSxDQUFDO0lBQ2pDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxNQUFNLEdBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztRQUN6QyxNQUFNLENBQUMsSUFBSSxDQUFDLHlGQUF5RixDQUFDLENBQUM7SUFDM0csQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQixPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBQSxHQUFHLElBQUksT0FBQSxLQUFLLEdBQUcsR0FBRyxHQUFHLE1BQU0sRUFBcEIsQ0FBb0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2xFLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDakIsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDOztBQ1pILDRDQUE0QztBQUM1QyxtQ0FBbUMiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZW51bSBDbHViIHtcclxuICAgIE5vbmUsXHJcbiAgICBCY0NsdWIgPSAyLFxyXG4gICAgQmNDYWZlLFxyXG4gICAgQmRDbHViLFxyXG4gICAgQmhDbHViLFxyXG4gICAgQmlDbHViXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldElkT2ZDbHViIChjbHViOiBzdHJpbmcpOiBDbHViIHtcclxuICAgIHN3aXRjaCAoY2x1Yikge1xyXG4gICAgICAgIGNhc2UgXCJiYy1DbHViXCI6XHJcbiAgICAgICAgICAgIHJldHVybiBDbHViLkJjQ2x1YjtcclxuICAgICAgICBjYXNlIFwiYmMtQ2Fmw6lcIjpcclxuICAgICAgICAgICAgcmV0dXJuIENsdWIuQmNDYWZlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIENsdWIuTm9uZTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0Vycm9yTW9kYWwobWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICAkKFwiI2Vycm9yTW9kYWxcIikubW9kYWwoXCJzaG93XCIpO1xyXG4gICAgJChcIiNlcnJvck1vZGFsXCIpLmZpbmQoXCIubW9kYWwtYm9keVwiKS5odG1sKG1lc3NhZ2UpO1xyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGluZ3MvaW5kZXguZC50c1wiLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiVXRpbGl0aWVzLnRzXCIvPlxyXG5cclxuLy8gdmFsdWVzIG9mIGV2ZW50cyB0aGF0IHNob3VsZCB0cmlnZ2VyIHRoZSBzZWxlY3Rpb24gb2YgYWxsIGNsdWJzXHJcbmxldCBpbnRlcm5hbEV2ZW50VmFsdWVzID0gW1xyXG4gICAgXCIxXCIsIC8vIEluZm9cclxuICAgIFwiNFwiLCAvLyBJbnRlcm5hbCBldmVudFxyXG4gICAgXCI1XCIsIC8vIHByaXZhdGUgcGFydHlcclxuICAgIFwiNlwiLCAvLyBjbGVhbmluZ1xyXG4gICAgXCI5XCIgIC8vIG90aGVyXHJcbl07XHJcblxyXG4kKFwiI2J1dHRvbi1jcmVhdGUtc3VibWl0XCIpLmFkZChcIiNidXR0b24tZWRpdC1zdWJtaXRcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IGVycm9ycyA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XHJcblxyXG4gICAgbGV0IGJlZ2luRGF0ZSA9IG5ldyBEYXRlKCQoXCJbbmFtZT0nYmVnaW5EYXRlJ11cIikucHJvcChcInZhbHVlXCIpICsgXCIgXCIgKyAkKFwiW25hbWU9J2JlZ2luVGltZSddXCIpLnByb3AoXCJ2YWx1ZVwiKSk7XHJcbiAgICBsZXQgZW5kRGF0ZSA9IG5ldyBEYXRlKCQoXCJbbmFtZT0nZW5kRGF0ZSddXCIpLnByb3AoXCJ2YWx1ZVwiKSArIFwiIFwiICsgJChcIltuYW1lPSdlbmRUaW1lJ11cIikucHJvcChcInZhbHVlXCIpKTtcclxuICAgIGlmIChiZWdpbkRhdGUuZ2V0VGltZSgpID4gZW5kRGF0ZS5nZXRUaW1lKCkpIHtcclxuICAgICAgICBlcnJvcnMucHVzaChcIkRpZSBTdGFydHplaXQgbGllZ3Qgdm9yIGRlciBFbmR6ZWl0IVwiKTtcclxuICAgIH1cclxuICAgIGlmICgkKFwiI2ZpbHRlci1jaGVja2JveGVzXCIpLmZpbmQoXCJpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkXCIpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGVycm9ycy5wdXNoKFwiRGVuIEZpbHRlciB2ZXJnZXNzZW4hIEJpdHRlIHNldHplIG1pbmRlc3RlbnMgZWluZSBTZWt0aW9uLCBkZXIgZGllc2UgVmVyYW5zdGFsdHVuZy9BdWZnYWJlIGdlemVpZ3Qgd2VyZGVuIHNvbGwuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGJvb3Rib3guYWxlcnQoZXJyb3JzLm1hcChlcnIgPT4gXCI8cD5cIiArIGVyciArIFwiPC9wPlwiKS5qb2luKFwiXFxuXCIpKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufSk7XHJcbiQoKCkgPT4ge1xyXG4gICAgLy8gaWYgc2V0LCBpbnRlcm5hbCBldmVudHMgd2lsbCB0cmlnZ2VyIHNlbGVjdGlvbiBvZiBhbGwgY2x1YnNcclxuICAgIC8vIGlmIHVzZXIgc2V0cyB0aGUgY2x1YiBtYW51YWxseSwgd2Ugd2FudCB0byBrZWVwIGhpcyBzZWxlY3Rpb25cclxuICAgIGxldCBhdXRvU2VsZWN0QWxsQ2x1YnMgPSB0cnVlO1xyXG4gICAgbGV0IGFsbENsdWJDaGVja0JveGVzID0gJChcIiNmaWx0ZXJcIikuZmluZChcImlucHV0W3R5cGU9Y2hlY2tib3hdXCIpO1xyXG4gICAgYWxsQ2x1YkNoZWNrQm94ZXMuY2xpY2soKCkgPT4ge1xyXG4gICAgICAgIGF1dG9TZWxlY3RBbGxDbHVicyA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gaW1wb3J0YW50IHRvIHVzZSBmdW5jdGlvbigpIChhbm9ueW1vdXMgZnVuY3Rpb24pIGhlcmUgYW4gbm90IGFuIGFycm93IGZ1bmN0aW9uXHJcbiAgICAvLyB1c2luZyBhbiBhcnJvdyBmdW5jdGlvbiB3aWxsIGNoYW5nZSB0aGUgXCJ0aGlzXCIgaW5zaWRlXHJcbiAgICAkKFwiW25hbWU9J2V2bnRfdHlwZSddXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgcHJvcCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgbGV0IGlzSW50ZXJuYWxFdmVudCA9IGludGVybmFsRXZlbnRWYWx1ZXMuaW5kZXhPZihwcm9wKSAhPT0gLTE7XHJcbiAgICAgICAgaWYgKGlzSW50ZXJuYWxFdmVudCkge1xyXG4gICAgICAgICAgICBpZiAoYXV0b1NlbGVjdEFsbENsdWJzKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2ZpbHRlclwiKS5maW5kKFwiaW5wdXRbdHlwZT1jaGVja2JveF1cIikucHJvcChcImNoZWNrZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IGFsbCBjaGVja2JveGVzXHJcbiAgICAgICAgICAgICQoXCIjZmlsdGVyXCIpLmZpbmQoXCJpbnB1dFt0eXBlPWNoZWNrYm94XVwiKS5wcm9wKFwiY2hlY2tlZFwiLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGxldCBjbHViTmFtZSA9ICQoZG9jdW1lbnQpLmZpbmQoXCIjcGxhY2VcIikudmFsKCk7XHJcbiAgICAgICAgICAgIGxldCBjbHViSWQgPSBnZXRJZE9mQ2x1YihjbHViTmFtZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2x1YklkICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNob3dUb0NsdWJDaGVja2JveCA9ICQoZG9jdW1lbnQpLmZpbmQoXCJbbmFtZT1maWx0ZXJTaG93VG9DbHViXCIgKyBjbHViSWQgKyBcIl1cIik7XHJcbiAgICAgICAgICAgICAgICBzaG93VG9DbHViQ2hlY2tib3gucHJvcChcImNoZWNrZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL2luZGV4LmQudHNcIi8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cIlV0aWxpdGllcy50c1wiLz5cclxuXHJcbiQoXCIjYnV0dG9uLWNyZWF0ZS1zdXJ2ZXlcIikuY2xpY2soKCkgPT4ge1xyXG4gICAgbGV0IGVycm9ycyA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XHJcbiAgICBpZiAoJChcIiNkZXNjcmlwdGlvblwiKS52YWwoKS5sZW5ndGggID4gMTUwMCkge1xyXG4gICAgICAgIGVycm9ycy5wdXNoKFwiRGVyIEJlc2NocmVpYnVuZ3N0ZXh0IGlzdCB6dSBsYW5nZSEgRGVyIFRleHQgc29sbHRlIHdlbmlnZXIgYWxzIDE1MDAgWmVpY2hlbiBlbnRoYWx0ZW4uXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgYm9vdGJveC5hbGVydChlcnJvcnMubWFwKGVyciA9PiBcIjxwPlwiICsgZXJyICsgXCI8L3A+XCIpLmpvaW4oXCJcXG5cIikpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufSk7XHJcblxyXG5cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwaW5ncy9pbmRleC5kLnRzXCIvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCJVdGlsaXRpZXMudHNcIi8+XHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

///<reference path="_references.ts"/>
$("#button-create-survey").click(function () {
    var errors = new Array();
    if ($("description").text().length > 1500) {
        errors.push("Der Beschreibungstext ist zu lange! Der Text sollte weniger als 1500 Zeichen enthalten.,w");
    }
    if (errors.length > 0) {
        showErrorModal(errors.map(function (err) { return "<p>" + err + "</p>"; }).join("\n"));
        return false;
    }
});

///<reference path="_references.ts"/>
function getRowName(a) {
    return $(a).children("td").eq(0).text();
}
function getRowShifts(a) {
    var text = $(a).children("td").eq(1).text();
    return parseInt(text);
}
$("[data-sort='name']").click(function () {
    this.ascending = !this.ascending;
    var $table = $(this).parents("table");
    var rows = $table
        .find("tbody")
        .find("tr")
        .toArray()
        .sort(function (a, b) { return getRowName(a).localeCompare(getRowName(b)); });
    if (this.ascending) {
        rows.reverse();
    }
    rows.forEach(function (row) {
        $table.append($(row));
    });
});
$("[data-sort='shifts']").click(function () {
    this.ascending = !this.ascending;
    var $table = $(this).parents("table");
    var rows = $table
        .find("tbody")
        .find("tr")
        .toArray()
        .sort(function (a, b) { return getRowShifts(a) - getRowShifts(b); });
    if (this.ascending) {
        rows.reverse();
    }
    rows.forEach(function (row) {
        $table.append($(row));
    });
});

///<reference path="_references.ts"/>
var Club;
(function (Club) {
    Club[Club["None"] = 0] = "None";
    Club[Club["BcClub"] = 2] = "BcClub";
    Club[Club["BcCafe"] = 3] = "BcCafe";
    Club[Club["BdClub"] = 4] = "BdClub";
    Club[Club["BhClub"] = 5] = "BhClub";
    Club[Club["BiClub"] = 6] = "BiClub";
})(Club || (Club = {}));
function getIdOfClub(club) {
    switch (club) {
        case "bc-Club":
            return Club.BcClub;
        case "bc-Caf√©":
            return Club.BcCafe;
    }
    return Club.None;
}
function showErrorModal(message) {
    $("#errorModal").modal("show");
    $("#errorModal").find(".modal-body").html(message);
}

// external references go here
///<reference path="../typings/index.d.ts"/>
// internal reference go here
///<reference path="CreateEditEvent.ts"/>
///<reference path="CreateSurvey.ts"/>
///<reference path="StatisticsView.ts"/>
///<reference path="Utilities.ts"/>

///<reference path="_references.ts"/>
// values of events that should trigger the selection of all clubs
var internalEventValues = [
    "1",
    "4",
    "5",
    "6",
    "9" // other
];
$("#button-create-submit").add("#button-edit-submit").click(function () {
    var errors = new Array();
    var beginDate = new Date($("[name='beginDate']").prop("value") + " " + $("[name='beginTime']").prop("value"));
    var endDate = new Date($("[name='endDate']").prop("value") + " " + $("[name='endTime']").prop("value"));
    if (beginDate.getTime() > endDate.getTime()) {
        errors.push("Die Startzeit liegt vor der Endzeit!");
    }
    if ($("#filter-checkboxes").find("input[type=checkbox]:checked").length === 0) {
        errors.push("Den Filter vergessen! Bitte setze mindestens eine Sektion, der diese Veranstaltung/Aufgabe gezeigt werden soll.");
    }
    if (errors.length > 0) {
        showErrorModal(errors.map(function (err) { return "<p>" + err + "</p>"; }).join("\n"));
        return false;
    }
});
$(function () {
    // if set, internal events will trigger selection of all clubs
    // if user sets the club manually, we want to keep his selection
    var autoSelectAllClubs = true;
    var allClubCheckBoxes = $("#filter").find("input[type=checkbox]");
    allClubCheckBoxes.click(function () {
        autoSelectAllClubs = false;
    });
    // important to use function() (anonymous function) here an not an arrow function
    // using an arrow function will change the "this" inside
    $("[name='evnt_type']").click(function () {
        var prop = $(this).val();
        var isInternalEvent = internalEventValues.indexOf(prop) !== -1;
        if (isInternalEvent) {
            if (autoSelectAllClubs) {
                $("#filter").find("input[type=checkbox]").prop("checked", true);
            }
        }
        else {
            // reset all checkboxes
            $("#filter").find("input[type=checkbox]").prop("checked", false);
            var clubName = $(document).find("#place").val();
            var clubId = getIdOfClub(clubName);
            if (clubId !== -1) {
                var showToClubCheckbox = $(document).find("[name=filterShowToClub" + clubId + "]");
                showToClubCheckbox.prop("checked", true);
            }
        }
    });
});

///<reference path="../typings/index.d.ts"/>
///<reference path="Utilities.ts"/>

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNyZWF0ZVN1cnZleS50cyIsIlN0YXRpc3RpY3NWaWV3LnRzIiwiVXRpbGl0aWVzLnRzIiwiX3JlZmVyZW5jZXMudHMiLCJDcmVhdGVFZGl0RXZlbnQudHMiLCJFdmVudFZpZXcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEscUNBQXFDO0FBRXJDLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUM3QixJQUFJLE1BQU0sR0FBRyxJQUFJLEtBQUssRUFBVSxDQUFDO0lBQ2pDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEdBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztRQUN6QyxNQUFNLENBQUMsSUFBSSxDQUFDLDJGQUEyRixDQUFDLENBQUM7SUFDN0csQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQixjQUFjLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFBLEdBQUcsSUFBSSxPQUFBLEtBQUssR0FBRyxHQUFHLEdBQUcsTUFBTSxFQUFwQixDQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDbkUsTUFBTSxDQUFDLEtBQUssQ0FBQztJQUNqQixDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUM7O0FDWEgscUNBQXFDO0FBRXJDLG9CQUFvQixDQUFRO0lBQ3hCLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUM1QyxDQUFDO0FBRUQsc0JBQXNCLENBQVE7SUFDMUIsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFD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LENBQUMsQ0FBQztZQUNwRSxDQUFDO1FBQ0wsQ0FBQztRQUNELElBQUksQ0FBQyxDQUFDO1lBQ0YsdUJBQXVCO1lBQ3ZCLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ2pFLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDaEQsSUFBSSxNQUFNLEdBQUcsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRW5DLEVBQUUsQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hCLElBQUksa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUM7Z0JBQ25GLGtCQUFrQixDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDN0MsQ0FBQztRQUNMLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDOztBQzNESCw0Q0FBNEM7QUFDNUMsbUNBQW1DIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLzxyZWZlcmVuY2UgcGF0aD1cIl9yZWZlcmVuY2VzLnRzXCIvPlxyXG5cclxuJChcIiNidXR0b24tY3JlYXRlLXN1cnZleVwiKS5jbGljaygoKSA9PiB7XHJcbiAgICBsZXQgZXJyb3JzID0gbmV3IEFycmF5PHN0cmluZz4oKTtcclxuICAgIGlmICgkKFwiZGVzY3JpcHRpb25cIikudGV4dCgpLmxlbmd0aCAgPiAxNTAwKSB7XHJcbiAgICAgICAgZXJyb3JzLnB1c2goXCJEZXIgQmVzY2hyZWlidW5nc3RleHQgaXN0IHp1IGxhbmdlISBEZXIgVGV4dCBzb2xsdGUgd2VuaWdlciBhbHMgMTUwMCBaZWljaGVuIGVudGhhbHRlbi4sd1wiKTtcclxuICAgIH1cclxuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHNob3dFcnJvck1vZGFsKGVycm9ycy5tYXAoZXJyID0+IFwiPHA+XCIgKyBlcnIgKyBcIjwvcD5cIikuam9pbihcIlxcblwiKSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59KTtcclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiX3JlZmVyZW5jZXMudHNcIi8+XHJcblxyXG5mdW5jdGlvbiBnZXRSb3dOYW1lKGE6c3RyaW5nKSB7XHJcbiAgICByZXR1cm4gJChhKS5jaGlsZHJlbihcInRkXCIpLmVxKDApLnRleHQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Um93U2hpZnRzKGE6c3RyaW5nKSB7XHJcbiAgICB2YXIgdGV4dCA9ICQoYSkuY2hpbGRyZW4oXCJ0ZFwiKS5lcSgxKS50ZXh0KCk7XHJcbiAgICByZXR1cm4gcGFyc2VJbnQodGV4dCk7XHJcbn1cclxuXHJcbiQoXCJbZGF0YS1zb3J0PSduYW1lJ11cIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5hc2NlbmRpbmcgPSAhdGhpcy5hc2NlbmRpbmc7XHJcbiAgICBsZXQgJHRhYmxlID0gJCh0aGlzKS5wYXJlbnRzKFwidGFibGVcIik7XHJcbiAgICBsZXQgcm93cyA9ICR0YWJsZVxyXG4gICAgICAgIC5maW5kKFwidGJvZHlcIilcclxuICAgICAgICAuZmluZChcInRyXCIpXHJcbiAgICAgICAgLnRvQXJyYXkoKVxyXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBnZXRSb3dOYW1lKGEpLmxvY2FsZUNvbXBhcmUoZ2V0Um93TmFtZShiKSkpO1xyXG4gICAgaWYgKHRoaXMuYXNjZW5kaW5nKSB7XHJcbiAgICAgICAgcm93cy5yZXZlcnNlKCk7XHJcbiAgICB9XHJcbiAgICByb3dzLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xyXG4gICAgICAgICR0YWJsZS5hcHBlbmQoJChyb3cpKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbiQoXCJbZGF0YS1zb3J0PSdzaGlmdHMnXVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmFzY2VuZGluZyA9ICF0aGlzLmFzY2VuZGluZztcclxuICAgIGxldCAkdGFibGUgPSAkKHRoaXMpLnBhcmVudHMoXCJ0YWJsZVwiKTtcclxuICAgIGxldCByb3dzID0gJHRhYmxlXHJcbiAgICAgICAgLmZpbmQoXCJ0Ym9keVwiKVxyXG4gICAgICAgIC5maW5kKFwidHJcIilcclxuICAgICAgICAudG9BcnJheSgpXHJcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGdldFJvd1NoaWZ0cyhhKSAtIGdldFJvd1NoaWZ0cyhiKSk7XHJcbiAgICBpZiAodGhpcy5hc2NlbmRpbmcpIHtcclxuICAgICAgICByb3dzLnJldmVyc2UoKTtcclxuICAgIH1cclxuICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XHJcbiAgICAgICAgJHRhYmxlLmFwcGVuZCgkKHJvdykpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCJfcmVmZXJlbmNlcy50c1wiLz5cclxuZW51bSBDbHViIHtcclxuICAgIE5vbmUsXHJcbiAgICBCY0NsdWIgPSAyLFxyXG4gICAgQmNDYWZlLFxyXG4gICAgQmRDbHViLFxyXG4gICAgQmhDbHViLFxyXG4gICAgQmlDbHViXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldElkT2ZDbHViIChjbHViOiBzdHJpbmcpOiBDbHViIHtcclxuICAgIHN3aXRjaCAoY2x1Yikge1xyXG4gICAgICAgIGNhc2UgXCJiYy1DbHViXCI6XHJcbiAgICAgICAgICAgIHJldHVybiBDbHViLkJjQ2x1YjtcclxuICAgICAgICBjYXNlIFwiYmMtQ2Fmw6lcIjpcclxuICAgICAgICAgICAgcmV0dXJuIENsdWIuQmNDYWZlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIENsdWIuTm9uZTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0Vycm9yTW9kYWwobWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICAkKFwiI2Vycm9yTW9kYWxcIikubW9kYWwoXCJzaG93XCIpO1xyXG4gICAgJChcIiNlcnJvck1vZGFsXCIpLmZpbmQoXCIubW9kYWwtYm9keVwiKS5odG1sKG1lc3NhZ2UpO1xyXG59XHJcbiIsIi8vIGV4dGVybmFsIHJlZmVyZW5jZXMgZ28gaGVyZVxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL2luZGV4LmQudHNcIi8+XHJcblxyXG4vLyBpbnRlcm5hbCByZWZlcmVuY2UgZ28gaGVyZVxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCJDcmVhdGVFZGl0RXZlbnQudHNcIi8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cIkNyZWF0ZVN1cnZleS50c1wiLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiU3RhdGlzdGljc1ZpZXcudHNcIi8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cIlV0aWxpdGllcy50c1wiLz5cclxuXHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIl9yZWZlcmVuY2VzLnRzXCIvPlxyXG5cclxuLy8gdmFsdWVzIG9mIGV2ZW50cyB0aGF0IHNob3VsZCB0cmlnZ2VyIHRoZSBzZWxlY3Rpb24gb2YgYWxsIGNsdWJzXHJcbmxldCBpbnRlcm5hbEV2ZW50VmFsdWVzID0gW1xyXG4gICAgXCIxXCIsIC8vIEluZm9cclxuICAgIFwiNFwiLCAvLyBJbnRlcm5hbCBldmVudFxyXG4gICAgXCI1XCIsIC8vIHByaXZhdGUgcGFydHlcclxuICAgIFwiNlwiLCAvLyBjbGVhbmluZ1xyXG4gICAgXCI5XCIgIC8vIG90aGVyXHJcbl07XHJcblxyXG4kKFwiI2J1dHRvbi1jcmVhdGUtc3VibWl0XCIpLmFkZChcIiNidXR0b24tZWRpdC1zdWJtaXRcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IGVycm9ycyA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XHJcblxyXG4gICAgbGV0IGJlZ2luRGF0ZSA9IG5ldyBEYXRlKCQoXCJbbmFtZT0nYmVnaW5EYXRlJ11cIikucHJvcChcInZhbHVlXCIpICsgXCIgXCIgKyAkKFwiW25hbWU9J2JlZ2luVGltZSddXCIpLnByb3AoXCJ2YWx1ZVwiKSk7XHJcbiAgICBsZXQgZW5kRGF0ZSA9IG5ldyBEYXRlKCQoXCJbbmFtZT0nZW5kRGF0ZSddXCIpLnByb3AoXCJ2YWx1ZVwiKSArIFwiIFwiICsgJChcIltuYW1lPSdlbmRUaW1lJ11cIikucHJvcChcInZhbHVlXCIpKTtcclxuICAgIGlmIChiZWdpbkRhdGUuZ2V0VGltZSgpID4gZW5kRGF0ZS5nZXRUaW1lKCkpIHtcclxuICAgICAgICBlcnJvcnMucHVzaChcIkRpZSBTdGFydHplaXQgbGllZ3Qgdm9yIGRlciBFbmR6ZWl0IVwiKTtcclxuICAgIH1cclxuICAgIGlmICgkKFwiI2ZpbHRlci1jaGVja2JveGVzXCIpLmZpbmQoXCJpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkXCIpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGVycm9ycy5wdXNoKFwiRGVuIEZpbHRlciB2ZXJnZXNzZW4hIEJpdHRlIHNldHplIG1pbmRlc3RlbnMgZWluZSBTZWt0aW9uLCBkZXIgZGllc2UgVmVyYW5zdGFsdHVuZy9BdWZnYWJlIGdlemVpZ3Qgd2VyZGVuIHNvbGwuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHNob3dFcnJvck1vZGFsKGVycm9ycy5tYXAoZXJyID0+IFwiPHA+XCIgKyBlcnIgKyBcIjwvcD5cIikuam9pbihcIlxcblwiKSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59KTtcclxuJCgoKSA9PiB7XHJcbiAgICAvLyBpZiBzZXQsIGludGVybmFsIGV2ZW50cyB3aWxsIHRyaWdnZXIgc2VsZWN0aW9uIG9mIGFsbCBjbHVic1xyXG4gICAgLy8gaWYgdXNlciBzZXRzIHRoZSBjbHViIG1hbnVhbGx5LCB3ZSB3YW50IHRvIGtlZXAgaGlzIHNlbGVjdGlvblxyXG4gICAgbGV0IGF1dG9TZWxlY3RBbGxDbHVicyA9IHRydWU7XHJcbiAgICBsZXQgYWxsQ2x1YkNoZWNrQm94ZXMgPSAkKFwiI2ZpbHRlclwiKS5maW5kKFwiaW5wdXRbdHlwZT1jaGVja2JveF1cIik7XHJcbiAgICBhbGxDbHViQ2hlY2tCb3hlcy5jbGljaygoKSA9PiB7XHJcbiAgICAgICAgYXV0b1NlbGVjdEFsbENsdWJzID0gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBpbXBvcnRhbnQgdG8gdXNlIGZ1bmN0aW9uKCkgKGFub255bW91cyBmdW5jdGlvbikgaGVyZSBhbiBub3QgYW4gYXJyb3cgZnVuY3Rpb25cclxuICAgIC8vIHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdpbGwgY2hhbmdlIHRoZSBcInRoaXNcIiBpbnNpZGVcclxuICAgICQoXCJbbmFtZT0nZXZudF90eXBlJ11cIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBwcm9wID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICBsZXQgaXNJbnRlcm5hbEV2ZW50ID0gaW50ZXJuYWxFdmVudFZhbHVlcy5pbmRleE9mKHByb3ApICE9PSAtMTtcclxuICAgICAgICBpZiAoaXNJbnRlcm5hbEV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChhdXRvU2VsZWN0QWxsQ2x1YnMpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjZmlsdGVyXCIpLmZpbmQoXCJpbnB1dFt0eXBlPWNoZWNrYm94XVwiKS5wcm9wKFwiY2hlY2tlZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gcmVzZXQgYWxsIGNoZWNrYm94ZXNcclxuICAgICAgICAgICAgJChcIiNmaWx0ZXJcIikuZmluZChcImlucHV0W3R5cGU9Y2hlY2tib3hdXCIpLnByb3AoXCJjaGVja2VkXCIsIGZhbHNlKTtcclxuICAgICAgICAgICAgbGV0IGNsdWJOYW1lID0gJChkb2N1bWVudCkuZmluZChcIiNwbGFjZVwiKS52YWwoKTtcclxuICAgICAgICAgICAgbGV0IGNsdWJJZCA9IGdldElkT2ZDbHViKGNsdWJOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjbHViSWQgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2hvd1RvQ2x1YkNoZWNrYm94ID0gJChkb2N1bWVudCkuZmluZChcIltuYW1lPWZpbHRlclNob3dUb0NsdWJcIiArIGNsdWJJZCArIFwiXVwiKTtcclxuICAgICAgICAgICAgICAgIHNob3dUb0NsdWJDaGVja2JveC5wcm9wKFwiY2hlY2tlZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KTtcclxuXHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGluZ3MvaW5kZXguZC50c1wiLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiVXRpbGl0aWVzLnRzXCIvPlxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
